# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
"on":
 push:
  branches:
   - master
jobs:
 build_and_deploy:
  runs-on: ubuntu-latest
  steps:
   - uses: actions/checkout@v2
      env: 
        BASE_URL: https://chat-app-quyetnh.herokuapp.com/api/v1/
        SOCKET_URL: https://chat-app-quyetnh.herokuapp.com/
        CLOUDINARY_URL: https://api.cloudinary.com/v1_1/huuquyet/image/upload
        CLOUDINARY_UPLOAD_PRESET: huuquyet
   - run: npm install && npm run build
   - uses: FirebaseExtended/action-hosting-deploy@v0
     with:
      repoToken: "${{ secrets.GITHUB_TOKEN }}"
      firebaseServiceAccount: "${{ secrets.FIREBASE_SERVICE_ACCOUNT_CHATAPP_47DA7 }}"
      channelId: live
      projectId: chatapp-47da7
